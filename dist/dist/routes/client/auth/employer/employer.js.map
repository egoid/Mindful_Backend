{"version":3,"sources":["../../../../../routes/client/auth/employer/employer.js"],"names":["express","require","db","router","Router","exports","get","get_employer","get_employer_jobs_by_employer","req","res","sql","values","connectAndQuery","error","results","console","sendStatus","length","status","send","user","employer_id"],"mappings":"AAAA;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,KAAKD,QAAQ,8BAAR,CAAT;AACA,IAAIE,SAAS,IAAIH,QAAQI,MAAZ,EAAb;AACAC,QAAQF,MAAR,GAAiBA,MAAjB;;AAEAA,OAAOG,GAAP,CAAW,aAAX,EAA0BC,YAA1B;AACAJ,OAAOG,GAAP,CAAW,iBAAX,EAA8BE,6BAA9B;;AAEA,SAASD,YAAT,CAAsBE,GAAtB,EAA2BC,GAA3B,EAAgC;AAC9B,MAAIC,MAAM,oDAAoD,gBAApD,GAAuE,2BAAvE,GAAqG,uBAA/G;AACA,MAAIC,SAAS,CAAC,CAAD,CAAb;;AAEAV,KAAGW,eAAH,CAAmB,EAAEF,KAAKA,GAAP,EAAYC,QAAQA,MAApB,EAAnB,EAAiD,UAAUE,KAAV,EAAiBC,OAAjB,EAA0B;AACzE,QAAID,KAAJ,EAAW;AACTE,cAAQF,KAAR,CAAc,wBAAd,EAAwCA,KAAxC;AACAJ,UAAIO,UAAJ,CAAe,GAAf;AACD,KAHD,MAGO,IAAIF,QAAQG,MAAR,GAAiB,CAArB,EAAwB;AAC7BR,UAAIO,UAAJ,CAAe,GAAf;AACD,KAFM,MAEA;AACLP,UAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,QAAQ,CAAR,CAArB;AACD;AACF,GATD;AAUD;AACD,SAASP,6BAAT,CAAuCC,GAAvC,EAA4CC,GAA5C,EAAiD;AAC/C,MAAIC,MAAM,6CAAV;AACA,MAAIC,SAAS,CAACH,IAAIY,IAAJ,CAASC,WAAV,CAAb;AACApB,KAAGW,eAAH,CAAmB,EAAEF,KAAKA,GAAP,EAAYC,QAAQA,MAApB,EAAnB,EAAiD,UAAUE,KAAV,EAAiBC,OAAjB,EAA0B;AACzE,QAAID,KAAJ,EAAW;AACTE,cAAQF,KAAR,CAAc,yCAAd,EAAyDA,KAAzD;AACAJ,UAAIO,UAAJ,CAAe,GAAf;AACD,KAHD,MAGO,IAAIF,QAAQG,MAAR,GAAiB,CAArB,EAAwB;AAC7BR,UAAIO,UAAJ,CAAe,GAAf;AACD,KAFM,MAEA;AACLP,UAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,OAArB;AACD;AACF,GATD;AAUD;AACD","file":"employer.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar db = require('../../../../mysql_db_prod.js');\nvar router = new express.Router();\nexports.router = router;\n\nrouter.get('/1/employer', get_employer);\nrouter.get('/1/employer/job', get_employer_jobs_by_employer);\n\nfunction get_employer(req, res) {\n  var sql = \"SELECT employer.*, user.email AS employee_name \" + \"FROM employer \" + \"JOIN user USING(user_id) \" + \"WHERE employer_id = ?\";\n  var values = [1];\n\n  db.connectAndQuery({ sql: sql, values: values }, function (error, results) {\n    if (error) {\n      console.error(\"get_employer: sql err:\", error);\n      res.sendStatus(500);\n    } else if (results.length < 1) {\n      res.sendStatus(404);\n    } else {\n      res.status(200).send(results[0]);\n    }\n  });\n}\nfunction get_employer_jobs_by_employer(req, res) {\n  var sql = \"SELECT job.* FROM job WHERE employer_id = ?\";\n  var values = [req.user.employer_id];\n  db.connectAndQuery({ sql: sql, values: values }, function (error, results) {\n    if (error) {\n      console.error(\"get_employer_jobs_by_employer: sql err:\", error);\n      res.sendStatus(500);\n    } else if (results.length < 1) {\n      res.sendStatus(404);\n    } else {\n      res.status(200).send(results);\n    }\n  });\n}\n//# sourceMappingURL=employer.js.map"]}