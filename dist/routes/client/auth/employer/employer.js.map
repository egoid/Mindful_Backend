{"version":3,"sources":["../../../../../routes/client/auth/employer/employer.js"],"names":["express","require","db","router","Router","exports","get","get_employer","get_employer_jobs_by_employer","req","res","sql","values","connectAndQuery","error","results","console","sendStatus","length","status","send","user","employer_id"],"mappings":"AAAA;;AAEA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,KAAKD,QAAQ,8BAAR,CAAX;AACA,IAAME,SAAS,IAAIH,QAAQI,MAAZ,EAAf;AACAC,QAAQF,MAAR,GAAiBA,MAAjB;;AAEAA,OAAOG,GAAP,CAAW,aAAX,EAA0BC,YAA1B;AACAJ,OAAOG,GAAP,CAAW,iBAAX,EAA8BE,6BAA9B;;AAGA,SAASD,YAAT,CAAsBE,GAAtB,EAA2BC,GAA3B,EAAgC;AAC9B,MAAMC,MAAM,oDACA,gBADA,GAEA,2BAFA,GAGA,uBAHZ;AAIA,MAAMC,SAAS,CAAC,CAAD,CAAf;;AAEAV,KAAGW,eAAH,CAAmB,EAACF,QAAD,EAAMC,cAAN,EAAnB,EAAkC,UAACE,KAAD,EAAQC,OAAR,EAAoB;AACpD,QAAGD,KAAH,EAAU;AACRE,cAAQF,KAAR,CAAc,wBAAd,EAAwCA,KAAxC;AACAJ,UAAIO,UAAJ,CAAe,GAAf;AACD,KAHD,MAGO,IAAGF,QAAQG,MAAR,GAAiB,CAApB,EAAuB;AAC5BR,UAAIO,UAAJ,CAAe,GAAf;AACD,KAFM,MAEA;AACLP,UAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,QAAQ,CAAR,CAArB;AACD;AACF,GATD;AAUD;AACD,SAASP,6BAAT,CAAuCC,GAAvC,EAA4CC,GAA5C,EAAiD;AAC/C,MAAMC,MAAM,6CAAZ;AACA,MAAMC,SAAS,CAACH,IAAIY,IAAJ,CAASC,WAAV,CAAf;AACApB,KAAGW,eAAH,CAAmB,EAACF,QAAD,EAAMC,cAAN,EAAnB,EAAkC,UAACE,KAAD,EAAQC,OAAR,EAAoB;AACpD,QAAGD,KAAH,EAAU;AACRE,cAAQF,KAAR,CAAc,yCAAd,EAAyDA,KAAzD;AACAJ,UAAIO,UAAJ,CAAe,GAAf;AACD,KAHD,MAGO,IAAGF,QAAQG,MAAR,GAAiB,CAApB,EAAuB;AAC5BR,UAAIO,UAAJ,CAAe,GAAf;AACD,KAFM,MAEA;AACLP,UAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,OAArB;AACD;AACF,GATD;AAUD","file":"employer.js","sourcesContent":["'use strict';\n\nconst express = require('express');\nconst db = require('../../../../mysql_db_prod.js');\nconst router = new express.Router();\nexports.router = router;\n\nrouter.get('/1/employer', get_employer);\nrouter.get('/1/employer/job', get_employer_jobs_by_employer);\n\n\nfunction get_employer(req, res) {\n  const sql = \"SELECT employer.*, user.email AS employee_name \" +\n              \"FROM employer \" +\n              \"JOIN user USING(user_id) \" +\n              \"WHERE employer_id = ?\";\n  const values = [1];\n\n  db.connectAndQuery({sql, values}, (error, results) => {\n    if(error) {\n      console.error(\"get_employer: sql err:\", error);\n      res.sendStatus(500);\n    } else if(results.length < 1) {\n      res.sendStatus(404);\n    } else {\n      res.status(200).send(results[0]);\n    }\n  });\n}\nfunction get_employer_jobs_by_employer(req, res) {\n  const sql = \"SELECT job.* FROM job WHERE employer_id = ?\";\n  const values = [req.user.employer_id];\n  db.connectAndQuery({sql, values}, (error, results) => {\n    if(error) {\n      console.error(\"get_employer_jobs_by_employer: sql err:\", error);\n      res.sendStatus(500);\n    } else if(results.length < 1) {\n      res.sendStatus(404);\n    } else {\n      res.status(200).send(results);\n    }\n  });\n}\n"]}